<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>juego</title>
    <link rel="stylesheet" href="estilo.css">
    <script src="base-preguntas.json"></script>
</head>

<body>
    <div class="contenedor">
        <div class="encabezado">
            <div class="categoria" id="categoria">categoria</div>
            <div class="pregunta" id="pregunta">pregunta</div>
        </div>
        <div class="btn" id="btn1" onclick="oprimir_btn(0)">
            opcion1
        </div>
        <div class="btn" id="btn2" onclick="oprimir_btn(1)">
            opcion2
        </div>
        <div class="btn" id="btn3" onclick="oprimir_btn(2)">
            opcion3
        </div>
        <div class="btn" id="btn4" onclick="oprimir_btn(3)">
            opcion4
        </div>
    </div>

    <script>
        let base_preguntas = readText("preguntas.json")
        let interprete_bp = JSON.parse(preguntas)
        let pregunta
        let posible_respuesta
        let btn_correspondiente = [
            select_id("btn1"),
            select_id("btn2"),
            select_id("btn3"),
            select_id("btn4"),
        ]

        function preguntaAleatoria() {
            escogerPregunta(Math.floor(Math.random) * interprete_bp.lenght)
        }
        let btns =
            [
                select_id("btn1"),
                select_id("btn2"),
                select_id("btn3"),
                select_id("btn4"),
            ]
        function desordenarRespuesta(pregunta) {
            let posibles_respuestas = [
                pregunta.respuesta,
                pregunta.incorrecta1,
                pregunta.incorrecta2,
                pregunta.incorrecta3]
            posibles_respuestas.sort(() => Math.random() - 0.5)
            select_id("btn1").innerHTML = posibles_respuestas[0]
            select_id("btn2").innerHTML = posibles_respuestas[1]
            select_id("btn3").innerHTML = posibles_respuestas[2]
            select_id("btn4").innerHTML = posibles_respuestas[3]
        }
        
        function oprimir_btn(i) {
            if (posibles_respuestas[i] == pregunta.respuesta) {
                btn_correspondiente[i].style.background = "green"
            }
            else {
                btn_correspondiente[i].style.background = "red"
            }
            setTimeout(() => {
                
                reiniciar()
            }, 30000);

        }
        function reiniciar() {
            for (const btn of btn_correspondiente) {
                btn.style.background = "write"
            }
            preguntaAleatoria
        }
        function escogerPregunta(n) {

            pregunta = interprete_bp[n]
            select_id("categoria").innerHTML = pregunta.categoria
            select_id("pregunta").innerHTML = pregunta.pregunta


        }
        function select_id(id) {
            return document.getElementById(id)
        }
        function style(id) {
            return select_id(id).style
        }
        function readText(ruta_local) {
            var texto = null;
            var xmlhttp = new XMLHttpRequest();
            xmhttp.open("GET", ruta_local, false);
            xmlhttp.send();
            if (xmhttp.status == 200) {
                texto = xlhttp.responseText;
            }
            return texto;
        }
    </script>

</body>

</html>
